---
layout: post
title: 为什么oc的方法命名那么长长长长长?
categories: [ios]
tags: []
fullview: false
keywords: Method, isa,MetaClass,runtime
description:

---

做了回标题党，长命名显然为了可读性，从Method来看oc的类结构吧

oc的一个Method是由一个struct objc_method *来的，由整个结构体可以牵连出SEL,IMP,id等定义，如下：


struct objc_method {
    SEL method_name; // 方法名
    char *method_types; // 方法类型
    IMP method_imp; // 函数指针
}

SEL的定义:

typedef struct objc_selector *SEL;

objc_selector:



IMP的定义:

typedef id (*IMP)(id, SEL, ...);

id的定义:

typedef struct objc_object *id;

objc_method结构体定义了Class的某个方法，被存储在objc_method_list里，list长这样：

struct objc_method_list {
    struct objc_method_list *obsolete;
    int method_count;
    /* variable length structure */
    struct objc_method method_list[1];
}

到此为止，关于Method的结构就差不多了，然后它被Class所用：

struct objc_class {
    Class isa  OBJC_ISA_AVAILABILITY;

#if !__OBJC2__
    Class super_class;
    const char *name;
    long version;
    long info;
    long instance_size;
    struct objc_ivar_list *ivars;
    struct objc_method_list **methodLists; // here
    struct objc_cache *cache;
    struct objc_protocol_list *protocols;
#endif

} OBJC2_UNAVAILABLE;

