---
layout: post
title: 浅尝Swift，会是个坑么？（待续）
categories: [ios]
tags: [ios8, swift]
fullview: false
keywords: ios8,Swift language
description: 在看了Swift的Guide，从自己对语言的理解来看Swift；）在看sf之前，我开始怀疑语言变得越来越聪明，Dev会不会变得越来越“蠢”？在看sf之后，我怎么觉得swift越来越像个坑。

---

在看了Swift的Guide，从自己对语言的理解来看Swift；）在看sf之前，我开始怀疑语言变得越来越聪明，Dev会不会变得越来越“蠢”？在看sf之后，我怎么觉得swift越来越像个坑。

1.如今当你读到一个变量的时候，是不知道变量类型的。因为sf变量定义都变成了let和var，只有在被assign的时候才知道Type，而一般在编码中我们会先定义好变量和Type，这样有个清晰的认识，而现在只有名字了，这样真的好么？另外sf依旧还是强类型语言- -

2.简单的基本类型变成了对象，比如int -> Int，UInt8,etc. 这必定是开销，不知道sf有没有做优化。

3.支持Tuples，打包多个值，这个用于函数返回是比较赞的feature。

4.Optionals，意思是说这个对象可能有值，可能没值，没太搞懂这个feature的原因，看上去像把

{% highlight objective-c %}
if(obj != nil)
  [obj func1];
{% endhighlight %}

变成了

{% highlight objective-c %}
obj?.func1()
{% endhighlight %}

有什么太大的意义么？还有点画蛇添足的提供obj!这种mark，意思是说当你确定obj有值的时候，会高效点。

5.支持..和...Range操作符，用x..y表示[x,y)，用x...y表示[x,y]，是`for(NSInteger i =0;i<count;i++)`的简化，不错。

6.String的长度计算countElements和utf16count要小心。

7.强大的操作符运算和自定义操作符，在Collection可以直接应用+=操作符（不知道能不能在Array中用-=），甚至是自定义操作符，比如++++，+-等等

8.统一了Collection的Iterator，不要考虑什么时候用enumerate还是forin了

9.从关心用mutable和immutable的结构到用var和let的类型的转移，实际上我觉得没省略什么。

10.在写for的时候，以前默认的写法是不关心当前游标指向的值，现在sf默认是关心，所以写法变成:

{% highlight objective-c %}
for(...)
{

}
{% endhighlight %}

sf的for的语法为：

{% highlight objective-c %}
for tmp in 1...5{
    // use tmp variable
}
{% endhighlight %}

但并非所有时候都关心当前游标指向的值，所以sf又象征性的提供

{% highlight objective-c %}
for _ in 1...5{

}
{% endhighlight %}

这种写法- -！

11.函数参数默认是const，需要更改参数要加var，需要指针传递要加inout，越来越发现sf的思想与传统的编程进行了颠倒- -！，参数支持默认值，支持...

12.把原来的global block变成了function，heap & stack block变成了closure

13.鸡肋的Trailing Closure，有点勉强的写法

14.有点混乱的参数传递，enum，structs都是值传递，Closure是引用传递，很容易傻傻分不清楚，比如传递一个Array进去，常规是引用传递，实际上是值传递，因为Array是用structs实现的，而structs和enum在sf里又不是严格意义的C类型- -，更加傻傻分不清楚了。

15.enum不再是enum，structs不再是structs了，他们完全已经成了变相的class了，定义方法和变量，实现protocal，enum，structs，class再一次傻傻分不清楚- -，只不过class支持继承和需要引用计数，因为是引用传递。而structs，enum每次进行值copy，小心使用。

16.Array和Dictionary是用Structs实现的，Dic是copy操作，Array是选择性copy操作，Array的copy只在发生在length发生改变时，再一次傻傻分不清楚，坑啊。

17.@lazy property，延迟加载的思想应用到了class里。

18.property默认加入了willSet didSet的observer，从分布的observer管理可做到集中式管理。

19.简化的global variable定义，挺好

20.Type Properties，其实就是类静态对象，也包括structs和enmu，所以可能取了个这名字。







